# S3 Event Notifications to SNS Email Complete Step-by-Step Guide

This setup will do the following.

When an event happens in your S3 bucket (example: object upload), S3 publishes a message to an SNS topic, and SNS sends an email to the subscribed email addresses.

Official references for S3 event notifications setup and required destination permissions are in the S3 user guide, and email subscription confirmation is in the SNS docs. citeturn0search4turn0search3turn0search9

---

## 1. Prerequisites

1. You must have an S3 bucket already (or create one).
2. SNS topic and S3 bucket should be in the same AWS account (easiest for first time).
3. Region note  
   For S3 event notifications to SNS, keep SNS topic in the same region as the bucket for smooth validation in console (common validation issue otherwise). AWS also emphasizes destination permissions must allow S3 to publish. citeturn0search3turn0search25
4. Your IAM user/role should have permissions to manage S3 bucket notifications and SNS topic/subscriptions.

Minimum IAM permissions (high-level)
- For SNS: sns:CreateTopic, sns:Subscribe, sns:SetTopicAttributes, sns:GetTopicAttributes, sns:ListSubscriptionsByTopic
- For S3: s3:GetBucketNotification, s3:PutBucketNotification, s3:GetBucketLocation

---

## 2. Step 1 Create an SNS Topic

1. Open AWS Console
2. Go to SNS service
3. Topics
4. Create topic
5. Type: Standard
6. Name: example `s3-events-topic`
7. Create topic

After creation, note the Topic ARN. You will use it in S3 event notification configuration.

---

## 3. Step 2 Add Email Subscribers to the SNS Topic

1. SNS console
2. Open your topic `s3-events-topic`
3. Subscriptions tab
4. Create subscription
5. Protocol: Email
6. Endpoint: enter the email address (example: abc@example.com)
7. Create subscription

Repeat the same for all required email addresses.

Important rule  
Each email subscription stays in Pending confirmation until the recipient confirms it. SNS email confirmation is mandatory before messages start delivering to that email address. citeturn0search9turn0search2

---

## 4. Step 3 Confirm Email Subscriptions

For each subscriber email address:

1. Open the inbox of that email address
2. Find the email from Amazon SNS
3. Click Confirm subscription

After clicking, go back to SNS console and refresh. Status should become Confirmed. citeturn0search9

If confirmation email is not received
- Check spam/junk
- Confirm correct email address was used
- Some corporate email systems block automated confirmation emails (common)

---

## 5. Step 4 Allow S3 to Publish to the SNS Topic (Most Important Permission)

This is the number one reason people fail.  
S3 must be allowed to publish to the SNS topic using the topic’s resource policy. AWS explicitly documents that you must grant S3 permission to publish messages to the SNS destination. citeturn0search3turn0search25

### Add SNS Topic Policy

1. SNS console
2. Topics
3. Open your topic
4. Edit
5. Access policy section (Advanced view)
6. Add a statement like below (replace placeholders)

```json
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Sid": "AllowS3Publish",
      "Effect": "Allow",
      "Principal": { "Service": "s3.amazonaws.com" },
      "Action": "SNS:Publish",
      "Resource": "SNS_TOPIC_ARN",
      "Condition": {
        "StringEquals": { "aws:SourceAccount": "YOUR_ACCOUNT_ID" },
        "ArnLike": { "aws:SourceArn": "arn:aws:s3:::YOUR_BUCKET_NAME" }
      }
    }
  ]
}
```

This is the exact idea recommended in AWS docs and knowledge center guidance: allow s3.amazonaws.com to publish, restrict it using SourceAccount and SourceArn (your bucket ARN). citeturn0search10turn0search3turn0search25

Notes
- SourceArn must be the bucket ARN, not object ARN.
- If you have multiple buckets sending to same topic, you can add multiple bucket ARNs or loosen the condition carefully.

---

## 6. Step 5 Configure S3 Bucket Event Notifications to SNS

AWS documents the console path as: bucket Properties, Event notifications, Create event notification. citeturn0search4turn0search5

1. Go to S3 console
2. Open your bucket
3. Go to Properties
4. Scroll to Event notifications
5. Create event notification

Fill the fields:

A. Event name  
Example: `send-email-on-upload`

B. Event types (choose based on requirement)
Common and practical:
- Object creation events: `ObjectCreated (All)` for uploads
- Object removal events: `ObjectRemoved (All)` for deletes
S3 supports many event types like ObjectCreated, ObjectRemoved, Restore, Replication, Lifecycle expiration events. Choose only what you need. citeturn0search1turn0search5

C. Filters (optional but recommended)
Use filters to avoid unnecessary emails.

Prefix example  
Only notify when files are uploaded under a folder:
- Prefix: `uploads/`

Suffix example  
Only notify for specific file types:
- Suffix: `.jpg` or `.csv`

D. Destination
Select destination type: SNS topic  
Select the SNS topic you created: `s3-events-topic`

Save.

If you get the error “Unable to validate the following destination configurations”
This almost always means SNS topic policy is missing or incorrect and S3 is not allowed to publish. AWS specifically calls out checking the SNS topic resource policy for S3 publish permission. citeturn0search25turn0search3

---

## 7. Step 6 Test the Setup (Upload and Confirm Email)

Test 1 ObjectCreated
1. Go to S3 bucket
2. Upload a file that matches your filters (example put a file inside `uploads/` if you set prefix)
3. Wait a few seconds
4. Check subscriber email inboxes

Test 2 ObjectRemoved (only if configured)
1. Delete an object from the bucket (that matches filters)
2. Check email

AWS walkthrough includes a “test the setup” step after adding notification configuration. citeturn0search0turn0search4

What the email contains
- SNS sends an email with the notification content (usually JSON formatted message)
- The S3 event message includes bucket name, object key, event type, time, etc.

---

## 8. What People Usually Miss (Important Rules)

1. Email subscription must be confirmed  
Until confirmed, emails will not be delivered. citeturn0search9

2. SNS topic policy must allow S3 publish  
Without that, S3 cannot send notifications to SNS. citeturn0search3turn0search25

3. Filters can block your test  
If you set prefix `uploads/` and you upload to root, you will not get email.

4. Event type mismatch  
If you selected only ObjectRemoved and you are testing upload, no email will come.

5. Multiple notifications  
S3 can send multiple notifications depending on event types and operations (example multipart upload completion triggers specific event type). Choose correct event type for your use case. citeturn0search1

---

## 9. Troubleshooting Checklist

If emails are not coming, check in this exact order.

1. SNS subscription status is Confirmed for every email address citeturn0search9
2. SNS topic policy includes s3.amazonaws.com principal and correct SourceArn bucket ARN citeturn0search3turn0search10
3. S3 bucket event notification points to the correct SNS topic and correct event types citeturn0search4turn0search5
4. Your filters (prefix/suffix) match the test object key
5. Try removing filters and test once, then re-add filters
6. Check CloudTrail if needed (advanced)

